# .htaccess na raiz do projeto
# 
# Este arquivo é usado quando o DocumentRoot aponta para a raiz (public_html/).
# Ele reescreve todas as rotas amigáveis para o index.php da raiz, que então
# inclui o front controller real em public/index.php.
# 
# Fluxo:
# 1. Requisição /admin/login → .htaccess reescreve para index.php
# 2. index.php (raiz) → inclui public/index.php
# 3. public/index.php → processa rota e renderiza view
# 
# Compatível com:
# - Hostings compartilhados (Hostinger, etc.)
# - Desenvolvimento local (via index.php de fallback)
# - Modo single e multi-tenant

# Opcional: se der problema de permissão na Hostinger, essa linha pode ser comentada
Options -Indexes

# Bloquear acesso direto a arquivos sensíveis
<FilesMatch "^(\.env|composer\.(json|lock)|\.git)">
    Require all denied
</FilesMatch>

# ============================================
# REGRAS DE REWRITE (PRINCIPAIS)
# ============================================
# Essas regras garantem que todas as rotas amigáveis sejam processadas pelo index.php
# ============================================

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # Se NÃO for um arquivo físico existente...
    RewriteCond %{REQUEST_FILENAME} !-f
    # ...e NÃO for uma pasta física existente...
    RewriteCond %{REQUEST_FILENAME} !-d
    # ...manda tudo para o index.php da raiz (que inclui public/index.php)
    RewriteRule ^ index.php [L]
</IfModule>

